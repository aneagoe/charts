# ocean-controller

![Version: 1.0.92](https://img.shields.io/badge/Version-1.0.92-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.0.77](https://img.shields.io/badge/AppVersion-1.0.77-informational?style=flat-square)

A Helm chart for Ocean Controller. This chart is usually invoked by the [spotctl](https://github.com/spotinst/spotctl) tool, but may also be run manually.

## Installation

1. Add the chart repository:

```sh
helm repo add spot https://charts.spot.io
```

2. Update information of available charts:

```sh
helm repo update
```

3. Install the chart:

```sh
helm install my-release spot/ocean-controller [...]
```

> NOTE: Please configure all required chart values using the `set` command line argument or a `values.yaml` file.

## Values

| Key                            | Type   | Default                                                                                                                                                                                                                                                                                                                                    | Description                                                                                                                  |
| ------------------------------ | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| affinity.nodeAffinity          | object | `{"preferredDuringSchedulingIgnoredDuringExecution":[{"preference":{"matchExpressions":[{"key":"node-role.kubernetes.io/master","operator":"Exists"}]},"weight":100}],"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.io/os","operator":"NotIn","values":["windows"]}]}]}}` | Node affinity.                                                                                                               |
| affinity.podAntiAffinity       | object | `{"preferredDuringSchedulingIgnoredDuringExecution":[{"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"k8s-app","operator":"In","values":["spotinst-kubernetes-cluster-controller"]}]},"topologyKey":"kubernetes.io/hostname"},"weight":50}]}`                                                                              | Pod anti-affinity.                                                                                                           |
| aksConnector.acdIdentifier     | string | `""`                                                                                                                                                                                                                                                                                                                                       | A unique identifier used by the Ocean AKS Connector when importing an AKS cluster.                                           |
| aksConnector.enabled           | bool   | `true`                                                                                                                                                                                                                                                                                                                                     | Controls whether the Ocean AKS Connector should be deployed (requires a valid `aksConnector.acdIdentifier`).                 |
| aksConnector.image.pullPolicy  | string | `"Always"`                                                                                                                                                                                                                                                                                                                                 | Image pull policy.                                                                                                           |
| aksConnector.image.pullSecrets | list   | `[]`                                                                                                                                                                                                                                                                                                                                       | Image pull secrets.                                                                                                          |
| aksConnector.image.repository  | string | `"spotinst/ocean-aks-connector:1.0.8"`                                                                                                                                                                                                                                                                                                     | Image repository.                                                                                                            |
| aksConnector.resources         | object | `{}`                                                                                                                                                                                                                                                                                                                                       | Resource requests and limits. Ref: http://kubernetes.io/docs/user-guide/compute-resources/                                   |
| dnsConfig                      | object | `{}`                                                                                                                                                                                                                                                                                                                                       | DNS config. Ref: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/                                    |
| dnsPolicy                      | string | `"Default"`                                                                                                                                                                                                                                                                                                                                | DNS policy. Ref: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy                   |
| image.pullPolicy               | string | `"Always"`                                                                                                                                                                                                                                                                                                                                 | Image pull policy.                                                                                                           |
| image.pullSecrets              | list   | `[]`                                                                                                                                                                                                                                                                                                                                       | Image pull secrets.                                                                                                          |
| image.repository               | string | `"gcr.io/spotinst-artifacts/kubernetes-cluster-controller"`                                                                                                                                                                                                                                                                                | Image repository.                                                                                                            |
| namespace                      | string | `"kube-system"`                                                                                                                                                                                                                                                                                                                            | Default namespace.                                                                                                           |
| resources                      | object | `{}`                                                                                                                                                                                                                                                                                                                                       | Resource requests and limits. Ref: http://kubernetes.io/docs/user-guide/compute-resources/                                   |
| secret.enabled                 | bool   | `false`                                                                                                                                                                                                                                                                                                                                    | Use a Secret instead of a ConfigMap to store credentials. Disabled for backward compatibility.                               |
| spotinst.account               | string | `""`                                                                                                                                                                                                                                                                                                                                       | (Required) Spot Account. Ref: https://docs.spot.io/administration/organizations?id=account.                                  |
| spotinst.baseUrl               | string | `""`                                                                                                                                                                                                                                                                                                                                       | (Optional) Base URL.                                                                                                         |
| spotinst.clusterIdentifier     | string | `""`                                                                                                                                                                                                                                                                                                                                       | (Required) Cluster identifier.                                                                                               |
| spotinst.disableAutoUpdate     | bool   | `false`                                                                                                                                                                                                                                                                                                                                    | (Optional) Disable auto update.                                                                                              |
| spotinst.enableCsrApproval     | bool   | `false`                                                                                                                                                                                                                                                                                                                                    | (Optional) Enable CSR approval.                                                                                              |
| spotinst.proxyUrl              | string | `""`                                                                                                                                                                                                                                                                                                                                       | (Optional) Proxy URL.                                                                                                        |
| spotinst.token                 | string | `""`                                                                                                                                                                                                                                                                                                                                       | (Required) Spot Token. Ref: https://docs.spot.io/administration/api/create-api-token.                                        |
| tolerations                    | list   | `[{"effect":"NoExecute","key":"node.kubernetes.io/not-ready","operator":"Exists","tolerationSeconds":150},{"effect":"NoExecute","key":"node.kubernetes.io/unreachable","operator":"Exists","tolerationSeconds":150},{"key":"node-role.kubernetes.io/master","operator":"Exists"}]`                                                         | Tolerations for nodes that have taints on them. Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/ |

---

Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
